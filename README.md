# Telegram Reading Bot

## Описание проекта
Telegram Reading Bot - это бот для Telegram, который помогает пользователям улучшать навыки чтения и понимания текста. Бот предлагает тексты для чтения по различным темам и категориям, после чего задает вопросы для проверки понимания прочитанного. За правильные ответы пользователи получают звезды и могут повышать свой статус.

## Основные возможности
- Чтение текстов по различным темам и категориям
- Ответы на вопросы по прочитанному материалу
- Система наград в виде звезд за правильные ответы
- Отслеживание прогресса пользователя (точность ответов, серии правильных ответов)
- Создание карточек для повторения материала
- Система статусов/бейджей на основе количества заработанных звезд
- Ограничение на количество вопросов по теме в день

## Требования
- Python 3.12 или выше
- PostgreSQL
- MongoDB
- Redis
- MinIO (для хранения файлов)

## Установка и настройка

### Установка зависимостей
Проект использует Poetry для управления зависимостями. Для установки всех необходимых пакетов выполните:

```bash
poetry install
```

### Настройка окружения
Создайте файл `.env` в корневой директории проекта со следующими переменными:

```
# Telegram
TG_BOT_TOKEN=ваш_токен_бота
TG_WEBHOOK_URL=url_для_вебхука
TG_WEBHOOK_TOKEN=секретный_токен_для_вебхука

# База данных
DB_HOST=localhost
DB_PORT=5432
DB_NAME=имя_базы_данных
DB_USER=пользователь
DB_PASSWORD=пароль

# MongoDB
MONGO_URI=mongodb://localhost:27017
MONGO_DB_NAME=имя_базы_mongodb

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# MinIO
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=ключ_доступа
MINIO_SECRET_KEY=секретный_ключ
MINIO_BUCKET=имя_бакета
```

### Инициализация базы данных
Для инициализации базы данных используйте Alembic:

```bash
alembic upgrade head
```

## Запуск приложения
Для запуска приложения выполните:

```bash
uvicorn src.app:app --host 0.0.0.0 --port 8000
```

## Структура проекта
```
src/
├── api/                  # API эндпоинты
├── bot/                  # Обработчики команд Telegram бота
│   ├── handlers/         # Обработчики различных типов сообщений
│   ├── middleware/       # Промежуточные обработчики
│   ├── services/         # Сервисы для бота
│   └── utils/            # Вспомогательные функции
├── config/               # Конфигурация приложения
├── core/                 # Ядро приложения
│   ├── application/      # Бизнес-логика приложения
│   ├── domain/           # Доменная модель
│   ├── infrastructure/   # Инфраструктурный слой (БД, клиенты)
│   ├── presentation/     # Представление данных
│   └── utils/            # Общие утилиты
└── tests/                # Тесты
```

## Зависимости
Основные зависимости проекта:
- SQLAlchemy - ORM для работы с PostgreSQL
- Alembic - миграции базы данных
- FastAPI - веб-фреймворк для API
- Aiogram - фреймворк для создания Telegram ботов
- Pydantic - валидация данных
- Redis - для кэширования и хранения временных данных
- MongoDB - для хранения некоторых типов данных
- MinIO - для хранения файлов
- OpenAI - для генерации вопросов и работы с текстом

## Разработка
Для запуска тестов используйте:

```bash
pytest
```

Для проверки стиля кода:

```bash
flake8
```

## Лицензия
Этот проект распространяется под лицензией [указать лицензию].